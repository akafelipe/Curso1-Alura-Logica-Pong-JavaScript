//BOLINHA
let xBolinha = 300;
let yBolinha = 200;
let diametro = 15;
let raio = diametro / 2;

//VEL BOLINHA
let velocidadexBolinha = 6;
let velocidadeyBolinha = 6;
let comprimentoRaquete = 10;
let alturaRaquete = 90;

//RAQUETE
let xRaquete1 = 5;
let yRaquete1 = 150;

//RAQUETE2
let xRaquete2 = 585;
let yRaquete2 = 150;

//RAQUETE Bot
let xRaqueteBot = 585;
let yRaqueteBot = 150;
let velocidadeyBot; 
let velocidadexBot;

let colisao = false;

function setup() {
  createCanvas(600, 400);
}

function draw() {
  background(50);
  movimentarBolinha();
  criarLinhaCentral();
  criarBolinha();   
  criarRaquete(xRaquete1, yRaquete1);
  //criarRaquete(xRaquete2, yRaquete2);
  criarRaquete(xRaqueteBot, yRaqueteBot);  
  movimentarRaquete1();
  //movimentarRaquete2();
  movimentarRaqueteBot();  
  verificarBorda();
  colisaoRaquete(xRaquete1, yRaquete2);
  colisaoRaquete(xRaqueteBot, yRaqueteBot);
}

function criarRaquete(x, y){
  rect(x, y, comprimentoRaquete, alturaRaquete);
}

function movimentarRaquete1(){
  if (keyIsDown(UP_ARROW)){
    yRaquete1 -= 10;
  }
  if (keyIsDown(DOWN_ARROW)){
    yRaquete1 += 10;
  }
}

function movimentarRaquete2(){
  if (keyIsDown(87)){
    yRaquete2 -= 10;
  }
  if (keyIsDown(83)){
    yRaquete2 += 10;
  }
}

function movimentarRaqueteBot(){
  velocidadeyBot = yBolinha - yRaqueteBot - (comprimentoRaquete/2) -30;
  yRaqueteBot += velocidadeyBot;
}

function criarBolinha(){
  //Criar Bolinha
  circle(xBolinha, yBolinha, diametro);  
}

function criarLinhaCentral(){
  line(width/2, 0, width/2, height);
  stroke('white');
  strokeWeight(5); 
}

function movimentarBolinha(){
  xBolinha += velocidadexBolinha;
  yBolinha += velocidadeyBolinha;  
}

function verificarBorda(){
  if (xBolinha > width-raio || xBolinha < 0+raio){
    velocidadexBolinha *= -1;
  }
  
  if(yBolinha > height-raio || yBolinha < 0+raio){
    velocidadeyBolinha *= -1;
  }  
}

function colisaoRaquete(x, y){
  colisao = collideRectCircle(x, y, comprimentoRaquete, alturaRaquete, xBolinha, yBolinha, raio); 
  if(colisao){
    velocidadexBolinha *= -1;
  }
}

function colisaoRaqueteBot(){
  colisao = collideRectCircle(xRaqueteBot, yRaqueteBot, comprimentoRaquete, alturaRaquete, xBolinha, yBolinha, raio); 
  if(colisao){
    velocidadexBolinha *= -1;
  }
}
